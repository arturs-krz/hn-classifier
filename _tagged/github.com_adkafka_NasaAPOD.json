{
	"_id": "14516075",
	"site": "https://github.com/adkafka/NasaAPOD",
	"title": " Download NASA's Astronomy Picture of the Day with Scala",
	"author": "adkafka",
	"date": "2017-06-13T13:04:19.368Z",
	"tags": {
		"categories": [
			"opensource",
			"scala"
		],
		"languages": [
			"scala"
		]
	},
	"content": "readme.md nasa astronomy picture the grabber, scalawritten adam kafkaintroductionevery , nasa updates astronomy picture the (apod), a beautiful image video. program provides simple command line interface download media within date range their site. script uses nasa api query service. order use script, need api key you obtain free filling the form their website.indiviuals configure script creating 'config.json' file. skeleton configuration is included 'config.json.default'. users should execute cp config.json.default config json, edit 'config.json' the text editor their choice. default file includes descriptions the fields.featuresdownload both images video featured the apod sitesupport batch downloads the of date ranges command line argumentsdetect already downloaded media skip datesupport usage a task scheduler such croneasily customizable options the 'config.json' file create hard link a seperate directory (screensaver_dir)useful you one directory used source a screensaver, desktop background, etc.dependenciesscala 2.12.2 sbt 0.13.15 were used during development. more recent versions these software should as . please submit issue you face .this script has been tested a macos computer, it should on unix machine, try and let know it works! download videos well, python cli tool youtube-dl is needed.usageusing sbt begin, run sbt the cloned directory. here, should able test script its configuration simply typing run pressing enter. is good step confirm the program is setup succesfully. once is confirmed, can experiment date ranges, executing statements the form run [start-yyyy-mm-dd] [end-yyyy-mm-dd], both parameters defaulting the value 'today'. note these ranges are inclusive, meaning end date is downloaded well. for example, run 2016-01-01 2016-12-31 download apod media the 2016. similarly, run 2017-02-01 download media february 1st, 2017 to including today.standalone it is desired execute script outside the sbt tool, may so compiling complete jar. easiest to this is the sbt assembly plugin. should able simply execute sbt assembly assembly an sbt shell. you run problems, their site let know i update code documentation. upon success, jar the form target/scala-2.12/nasa apod grabber-assembly-1.0.jar be produced. jar be executed indepently sbt running scala target/scala-2.12/nasa\\ apod\\ grabber-assembly-1.0.jar within project root. parameters still passed using same form previously outlined.api rate limits of , the nasa api has rate limit 'hourly limit: 1,000 requests per hour' ( their documentation more details). you exceed rate, script start fail, returning http error code. this happens, simply wait hour re-execute command. will pick where left off.cron daily nature the task sets up a perfect fit a cron job. example below demonstrates cron task (created using crontab -e) check hourly between 10am 9pm, everyday. example below uses standalone version compiled sbt assembly above. script only download media once per , because checks destination directory (pod_dir) the media before querying nasa api.shell=/bin/bash # you a different shell, change herepath=/usr/local/bin:/usr/local/sbin:... # sure 'scala' 'youtube-dl' are the path# min hour month dayweek command# (0-59) (0-23) (1-31) (1-12 jan-dec) (0-6 sun-sat)# nasa pic day0 10-21 * * * cd /path//repo; scala target/scala-2.12/nasa\\ apod\\ grabber-assembly-1.0.jar >> /path//log 2>&1scala patterns used project was created an introduction the scala programming langauge. therefore, is good example some the simple mechanisms scala provides its users.optionoptions are scala's cleaner of dealing failure functions are expected return object upon success. example, mediagrabber.fetchjson returns option[response]. subsequently, mediagrabber.grabmedia uses match the calling code deal successs failure cleanly.system commands more information, the blogpost alvin alexander's site. is used downloading image val exit_status = url(resp.hdurl) #> file(out_full) ! downloading video the python program youtube-dl.case classescase classes are used make json parsing easy, using json4s package. occurs querying nasa api ( response case class) when parsing config file ( class config_opts the config singleton object).java interoperationthroughout project, java code is called alongside scala. example this is date parsing, formatting, iteration.singleton objects project is composed three singleton objects: grab, config, mediagrabber. objects help seperate logical tasks the program avoid polluting global namesapce."
}