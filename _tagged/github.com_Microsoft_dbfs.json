{
	"_id": "14372402",
	"site": "https://github.com/Microsoft/dbfs",
	"title": "A Tool for Mounting MS SQL Server DMVs Using FUSE",
	"author": "vmarsy",
	"date": "2017-06-13T13:57:06.857Z",
	"tags": {
		"categories": [
			"opensource"
		],
		"languages": [
			"c++",
			"makefile"
		]
	},
	"content": "readme.md dbfsdbfs uses fuse mount ms sql server dmvs a virtual file system. gives the ability explore information your database (dynamic management views) using native bash commands!installationubuntu:sudo wget https://github.com/microsoft/dbfs/releases/download/0.1.5/dbfs_0.1.5_amd64.debsudo dpkg - dbfs_0.1.5_amd64.debsudo apt- install -frhel:sudo wget https://github.com/microsoft/dbfs/releases/download/0.1.5/dbfs-0.1.5-0.x86_64.rpmsudo wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpmsudo rpm -ivh epel-release-latest-7.noarch.rpmsudo yum updatesudo yum install dbfs-0.1.5-0.x86_64.rpmcheck your installation was successfull running:dbfs -hnote: dbfs suse linux apt-/yum package installs ubuntu/red hat coming soon!quick startchange directory a directory where want create config file mounting directory. example:$ cd ~/democreate directory want dmvs mount $ mkdir dmvcreate file store configurationtouch dmvtool.configedit config file using editor vivi dmvtool.config contents the file should [server friendly name]hostname=[hostname]username=[datbase_login]password=[password]version=[version]example:[server]hostname=00.000.000.000username=myusernamepassword=mypasswordversion=16run tooldbfs -c ./[config file] -m ./[mount directory]exampledbfs -c ./dmvtool.config -m ./dmv dmv the directorycd dmv should the list your friendly server names running 'ls'cd <server friendly name> should the list dmvs files running 'ls'. look the contents one the files:more <dmv file name> can pipe output dmvtool tools cut (csv) jq (json) format data better readability. default, dbfs runs background. can shut down using following commands:ps - | grep dbfs kill -2 <dmvtool pid> you to run in foreground can pass -f parameter. can pass -v parameter verbose output you are running tool the foreground.usagesetup:dbfs -m <mount-path> -c <conf-file-path> [options]required:-m/--mount-path : mount directory sql server(s) dmv files-c/--conf-file : location .conf file.\\optional:-d/--dump-path : dump directory used. default = \"/tmp/sqlserver\"-v/--verbose : start verbose mode-l/--log-file : path the log file ( used in verbose mode)-f : run dbfs foreground-h : print usageconfiguration file needs be the following format:[server]hostname=<>username=<>password=<>version=<>example:[server]hostname=00.000.000.000username=myusernamepassword=mypasswordversion=16 password is optional. it is provided a server entry - user be prompted the password. can multiple such entries the configuration file.examplesdemo commands:$ dbfs -m ~/demo/mount -c ~/demo/local_server.conf $ cd ~/demo/mount/local_server$ ls$ ls | grep - os | grep - memory$ cat dm_os_sys_memory$ cat dm_os_sys_memory.json$ cat dm_os_sys_memory.json | python -m json.tool$ awk '{print $1,$5}' dm_os_sys_memory | column -t$ join -j 1 -o 1.1,1.16,1.17,2.5,2.8 <(sort -k1 dm_exec_connections) <(sort -k1 dm_exec_connections) -t $'\\t' | sort -n -k1 | column -tbuildinginstall following packages: sudo apt- install \\ freetds-dev \\ freetds-bin \\ libunwind-dev \\ fuse \\ libfuse2 \\ libfuse-dev \\ libattr1-dev \\ libavahi-common-dev \\ -y build project: to build ubuntu package: package-ubuntu build rhel7 package: package-rhel7issuesplease let know any issues may by filing issue this github. the rare event a program crash, fuse module need be manually un-mounted.- command: fusermount -u <mount_directory>- 'mount_directory' should same the passed program startup.code conduct project has adopted microsoft open source code conduct. more information the code conduct faq contact opencode@microsoft.com any additional questions comments.privacy statement microsoft enterprise developer privacy statement describes privacy statement this software.license extension is licensed under mit license. please the third-party notices file additional copyright notices license terms applicable portions the software."
}