{
	"_id": "14373026",
	"site": "https://github.com/ofek/pypinfo",
	"title": " CLI to easily view PyPI download statistics via Google's BigQuery",
	"author": "ofek",
	"date": "2017-06-13T13:07:41.734Z",
	"tags": {
		"categories": [
			"opensource",
			"python",
			"bigquery",
			"pypi",
			"statistics"
		],
		"languages": [
			"python"
		]
	},
	"content": "readme.rst pypinfo: view pypi download statistics ease.pypinfo is simple cli access pypi download statistics via google's bigquery.installation is relatively painless, swear. to https://bigquery.cloud.google.com.sign if haven't already. first tb queried data each monthis free. each additional tb is $5. to https://console.developers.google.com/cloud-resource-manager create new project. name is fine, i recommend choose something do pypi pypinfo. way know the project is designated.follow https://cloud.google.com/storage/docs/authentication#generating--private-key create credentials json format. during creation, choose bigquery user role. creation, note download location. move file wherever want.pip install pypinfopypinfo --auth path//your_credentials.json, set environment variablegoogle_application_credentials points the file.usage$ pypinfousage: pypinfo [options] [project] [fields]... command [args]... valid fields are: project | version | pyversion | percent3 | percent2 | impl | impl-version | openssl | date | month | | country | installer | installer-version | setuptools-version | system | system-release | distro | distro-version | cpuoptions: -, --auth text path google credentials json file. --run / --test --test simply prints query. -j, --json print data json. -t, --timeout integer milliseconds. default: 120000 (2 minutes) -l, --limit text maximum number query results. default: 20 -d, --days text number days the past include. default: 30 -sd, --start-date text must negative. default: -31 -ed, --end-date text must negative. default: -1 -w, --where text where conditional. default: file.project = \"project\" -o, --order text field order . default: download_count --version show version exit. --help show message exit.pypinfo accepts 0 more options, followed exactly 1 project, followed 0 more fields. default the last 30 days are queried. let's a at examples!tip: queries are resulting nonetype errors, increase timeout.downloads a project$ pypinfo requestsdownload_count--------------11033343 downloads$ pypinfo \"\"download_count--------------662834133downloads a project python version$ pypinfo django pyversionpython_version download_count-------------- --------------2.7 7880603.5 4000083.6 1696653.4 134378none 594152.6 82763.3 48313.7 26803.2 15601.17 412.5 152.4 153.1 6 downloads country code$ pypinfo \"\" countrycountry download_count------- -------------- 427837633none 26184466ie 25595967cn 19682726de 17338740gb 16848703au 12201849ca 9828255fr 9780133br 9276365jp 9247794ru 8758959il 7578813 7468363kr 6809831nl 6120287sg 5882292tw 3961899cz 2352650pl 2270622downloads a project system distribution$ pypinfo cryptography system distrosystem_name distro_name download_count----------- ------------------------------- --------------linux ubuntu 1226983linux none 701829linux centos linux 254488linux debian gnu/linux 207352linux debian 205485linux centos 195178none none 179178windows none 126962darwin macos 123389darwin os x 51606linux amazon linux ami 43192linux red hat enterprise linux server 39157linux alpine linux 37721linux fedora 25036linux virtuozzo 10302linux raspbian gnu/linux 4261linux linux 4162linux oracle linux server 3754freebsd none 3513linux debian 3479 popular projects the past $ pypinfo --days 365 \"\" projectproject download_count--------------- --------------simplejson 315759419six 197395098setuptools 132878072python-dateutil 126256414pip 118786872botocore 115173253pyasn1 111974599requests 108922890selenium 104830580docutils 104397734jmespath 95403328awscli 94119214rsa 91575245colorama 85788062awscli-cwlogs 57035580futures 52305306cffi 51895901pyyaml 51475454pbr 50267849pyparsing 50155835percentage python 3 downloads the top 100 projects the past let's --test only the query instead sending .$ pypinfo --test --days 365 --limit 100 \"\" project percent3select file.project project, round(100 * sum(case regexp_extract(details.python, r\"^([^\\.]+)\") = \"3\" 1 else 0 end) / count(*), 1) percent_3, count(*) download_count, table_date_range( [-psf:pypi.downloads], date_add(current_timestamp(), -366, \"\"), date_add(current_timestamp(), -1, \"\") )group project,order download_count desclimit 100creditsdonald stufft maintaining pypi these years.google donating bigquery capacity pypi.paul kehrer hisawesome blog post.changelogimportant changes are emphasized.3.0.1fix: project names are normalized adhere pep 503.3.0.0breaking: --json option is just flag prints output prettified json.2.0.0added --json path option.1.0.0initial release"
}